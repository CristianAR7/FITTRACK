<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DroneConnect</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/react-router-dom@6/umd/react-router-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    'primary': '#3B82F6',   // Blue-500
                    'secondary': '#1E293B', // Slate-800
                    'accent': '#FBBF24',    // Amber-400
                    'light': '#F1F5F9',     // Slate-100
                    'dark': '#0F172A',      // Slate-900
                },
            }
        }
    }
    </script>
    <style>
        /* Simple smooth scroll */
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // =================================================================
        // SETUP: Import necessary hooks and components from CDNs
        // =================================================================
        const { useState, useEffect } = React;
        const { HashRouter, Routes, Route, Link, useLocation, useParams } = ReactRouterDOM;

        // =================================================================
        // ICONS.TSX
        // =================================================================
        const MapPinIcon = ({ className = "w-5 h-5" }) => ( <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className={className}><path strokeLinecap="round" strokeLinejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" /></svg> );
        const DollarSignIcon = ({ className = "w-5 h-5" }) => ( <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className={className}><path strokeLinecap="round" strokeLinejoin="round" d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg> );
        const CameraIcon = ({ className = "w-5 h-5" }) => ( <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className={className}><path strokeLinecap="round" strokeLinejoin="round" d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z" /><path strokeLinecap="round" strokeLinejoin="round" d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z" /></svg> );
        const VideoCameraIcon = ({ className = "w-5 h-5" }) => ( <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className={className}><path strokeLinecap="round" strokeLinejoin="round" d="M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9A2.25 2.25 0 0013.5 5.25h-9A2.25 2.25 0 002.25 7.5v9A2.25 2.25 0 004.5 18.75z" /></svg> );
        const SparklesIcon = ({ className = "w-5 h-5" }) => ( <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className={className}><path strokeLinecap="round" strokeLinejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L1.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.25 12L17 14.188l-1.25-2.188L13.563 12l2.188-1.25L17 8.562l1.25 2.188L20.438 12l-2.188 1.25z" /></svg> );
        const ChevronLeftIcon = ({ className = "w-6 h-6" }) => ( <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className={className}><path strokeLinecap="round" strokeLinejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" /></svg> );
        const ChevronRightIcon = ({ className = "w-6 h-6" }) => ( <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className={className}><path strokeLinecap="round" strokeLinejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg> );
        const StarIcon = ({ className = "w-5 h-5", filled = true }) => ( <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill={filled ? "currentColor" : "none"} stroke="currentColor" strokeWidth={1.5} className={className}> <path strokeLinecap="round" strokeLinejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.82.61l-4.725-2.885a.563.563 0 00-.652 0l-4.725 2.885a.562.562 0 01-.82-.61l1.285-5.385a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" /> </svg> );

        // =================================================================
        // STARRATING.TSX
        // =================================================================
        const StarRating = ({ rating, maxStars = 5, className = "", starClassName = "w-5 h-5" }) => {
            return (
                <div className={`flex items-center ${className}`}>
                {[...Array(maxStars)].map((_, index) => {
                    const starValue = index + 1;
                    return (
                    <StarIcon
                        key={index}
                        className={`${starClassName} ${rating >= starValue ? 'text-accent' : 'text-gray-300'}`}
                        filled={rating >= starValue}
                    />
                    );
                })}
                </div>
            );
        };

        // =================================================================
        // IMAGEGALLERY.TSX
        // =================================================================
        const ImageGallery = ({ images, altTextPrefix = "Gallery image" }) => {
            const [currentIndex, setCurrentIndex] = useState(0);
            const [isModalOpen, setIsModalOpen] = useState(false);

            if (!images || images.length === 0) {
                return <p className="text-gray-500">No images available.</p>;
            }

            const openModal = (index) => {
                setCurrentIndex(index);
                setIsModalOpen(true);
            };
            const closeModal = () => setIsModalOpen(false);
            const goToPrevious = () => setCurrentIndex((prevIndex) => (prevIndex === 0 ? images.length - 1 : prevIndex - 1));
            const goToNext = () => setCurrentIndex((prevIndex) => (prevIndex === images.length - 1 ? 0 : prevIndex + 1));
            const handleModalClick = (e) => { if (e.target === e.currentTarget) closeModal(); };

            return (
                <div>
                <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                    {images.map((src, index) => (
                    <button key={index} onClick={() => openModal(index)} className="focus:outline-none">
                        <img src={src} alt={`${altTextPrefix} ${index + 1}`} className="w-full h-40 object-cover rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200 cursor-pointer" />
                    </button>
                    ))}
                </div>
                {isModalOpen && (
                    <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4" onClick={handleModalClick}>
                        <div className="bg-white p-2 rounded-lg shadow-xl relative max-w-3xl max-h-[90vh]">
                            <img src={images[currentIndex]} alt={`${altTextPrefix} ${currentIndex + 1}`} className="max-w-full max-h-[calc(90vh-80px)] object-contain rounded" />
                            <button onClick={closeModal} className="absolute top-2 right-2 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75 transition" aria-label="Close modal"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6"><path strokeLinecap="round" strokeLinejoin="round" d="M6 18L18 6M6 6l12 12" /></svg></button>
                            <button onClick={goToPrevious} className="absolute left-2 top-1/2 -translate-y-1/2 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75 transition" aria-label="Previous image"><ChevronLeftIcon /></button>
                            <button onClick={goToNext} className="absolute right-2 top-1/2 -translate-y-1/2 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75 transition" aria-label="Next image"><ChevronRightIcon /></button>
                            <div className="text-center text-sm text-gray-300 mt-2 bg-black bg-opacity-50 p-1 rounded">{currentIndex + 1} / {images.length}</div>
                        </div>
                    </div>
                )}
                </div>
            );
        };

        // =================================================================
        // PILOTCARD.TSX
        // =================================================================
        const PilotCard = ({ pilot }) => {
            const displayPrice = pilot.hourlyRate ? `$${pilot.hourlyRate}/hr` : (pilot.eventPackages.length > 0 ? `From $${Math.min(...pilot.eventPackages.map(p => p.price))}` : 'Inquire for Price');

            return (
                <div className="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-shadow duration-300 flex flex-col h-full">
                <Link to={`/pilots/${pilot.id}`} className="block">
                    <img className="w-full h-56 object-cover" src={pilot.profilePictureUrl} alt={pilot.name} />
                </Link>
                <div className="p-6 flex flex-col flex-grow">
                    <Link to={`/pilots/${pilot.id}`} className="block">
                    <h3 className="text-2xl font-semibold text-secondary mb-1 hover:text-primary">{pilot.name}</h3>
                    </Link>
                    <p className="text-gray-600 text-sm mb-3">{pilot.tagline}</p>
                    <div className="flex items-center text-gray-700 mb-2"><MapPinIcon className="w-4 h-4 mr-2 text-primary" /><span>{pilot.location}</span></div>
                    <div className="flex items-center text-gray-700 mb-2"><DollarSignIcon className="w-4 h-4 mr-2 text-green-500" /><span>{displayPrice}</span></div>
                    <div className="flex items-center text-gray-700 mb-4"><StarRating rating={pilot.rating} starClassName="w-4 h-4"/><span className="ml-2 text-sm text-gray-500">({pilot.reviewsCount} reviews)</span></div>
                    <div className="mb-4">
                    <h4 className="text-xs font-semibold text-gray-500 uppercase mb-1">Specialties</h4>
                    <div className="flex flex-wrap gap-2">
                        {pilot.specialties.slice(0, 3).map(spec => (<span key={spec} className="bg-blue-100 text-primary text-xs font-medium px-2.5 py-0.5 rounded-full">{spec}</span>))}
                    </div>
                    </div>
                    <p className="text-gray-700 text-sm mb-4 line-clamp-3">{pilot.bio}</p>
                    <div className="mt-auto">
                    <Link to={`/pilots/${pilot.id}`} className="block w-full text-center bg-primary text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-150">View Profile</Link>
                    </div>
                </div>
                </div>
            );
        };
        
        // =================================================================
        // NAVBAR.TSX
        // =================================================================
        const Navbar = () => {
            return (
                <nav className="bg-secondary shadow-lg sticky top-0 z-50">
                    <div className="container mx-auto px-6 py-3">
                        <div className="flex items-center justify-between">
                            <Link to="/" className="text-2xl font-bold text-accent flex items-center">
                                <SparklesIcon className="w-8 h-8 mr-2 text-accent" /> DroneConnect
                            </Link>
                            <div className="flex space-x-4">
                                <Link to="/" className="text-light hover:text-accent px-3 py-2 rounded-md text-sm font-medium">Home</Link>
                                <Link to="/pilots" className="text-light hover:text-accent px-3 py-2 rounded-md text-sm font-medium">Browse Pilots</Link>
                                <a href="#" className="bg-accent text-secondary hover:bg-yellow-400 px-4 py-2 rounded-md text-sm font-medium transition duration-150">Become a Pilot</a>
                            </div>
                        </div>
                    </div>
                </nav>
            );
        };
        
        // =================================================================
        // FOOTER.TSX
        // =================================================================
        const Footer = () => {
            return (
                <footer className="bg-dark text-light mt-12">
                <div className="container mx-auto px-6 py-8">
                    <div className="flex flex-col md:flex-row justify-between items-center">
                    <p className="text-sm">&copy; {new Date().getFullYear()} DroneConnect. All rights reserved.</p>
                    <div className="flex space-x-4 mt-4 md:mt-0">
                        <a href="#" className="hover:text-accent">Privacy Policy</a>
                        <a href="#" className="hover:text-accent">Terms of Service</a>
                        <a href="#" className="hover:text-accent">Contact Us</a>
                    </div>
                    </div>
                </div>
                </footer>
            );
        };
        
        // =================================================================
        // PILOTDETAILVIEW.TSX - **MODIFIED TO FETCH FROM BACKEND**
        // =================================================================
        const PilotDetailView = () => {
            const { pilotId } = useParams();
            const [pilot, setPilot] = useState(null);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);

            useEffect(() => {
                fetch(`http://127.0.0.1:5000/api/pilots`)
                    .then(res => {
                        if (!res.ok) throw new Error('Network response was not ok');
                        return res.json();
                    })
                    .then(data => {
                        const foundPilot = data.find(p => p.id === pilotId);
                        if (foundPilot) {
                            setPilot(foundPilot);
                        } else {
                            throw new Error('Pilot not found');
                        }
                    })
                    .catch(error => setError(error.message))
                    .finally(() => setLoading(false));
            }, [pilotId]);


            if (loading) return <div className="text-center p-10">Loading pilot details...</div>;
            if (error) return (
                <div className="container mx-auto px-4 py-8 text-center">
                    <h2 className="text-2xl font-semibold text-red-600">Error: {error}</h2>
                    <p className="text-gray-600">Could not load pilot data. Please ensure the backend server is running.</p>
                    <Link to="/pilots" className="text-primary hover:underline mt-4 inline-block">Back to all pilots</Link>
                </div>
            );
            if (!pilot) return (
                 <div className="container mx-auto px-4 py-8 text-center">
                    <h2 className="text-2xl font-semibold text-red-600">Pilot not found.</h2>
                    <Link to="/pilots" className="text-primary hover:underline mt-4 inline-block">Back to all pilots</Link>
                 </div>
            );

            const displayPrice = pilot.hourlyRate ? `$${pilot.hourlyRate} per hour` : (pilot.eventPackages.length > 0 ? `Event packages starting from $${Math.min(...pilot.eventPackages.map(p => p.price))}` : 'Pricing available upon inquiry');

            return (
                <div className="container mx-auto px-4 py-8">
                    <div className="bg-white rounded-xl shadow-2xl overflow-hidden">
                        {/* Header Section */}
                        <div className="md:flex">
                            <div className="md:w-1/3"><img className="w-full h-full object-cover" src={pilot.profilePictureUrl} alt={pilot.name} /></div>
                            <div className="md:w-2/3 p-8">
                                <h1 className="text-4xl font-bold text-secondary mb-2">{pilot.name}</h1>
                                <p className="text-lg text-gray-600 mb-4">{pilot.tagline}</p>
                                <div className="flex items-center text-gray-700 mb-2"><MapPinIcon className="w-5 h-5 mr-2 text-primary" /><span>{pilot.location}</span></div>
                                <div className="flex items-center text-gray-700 mb-2"><DollarSignIcon className="w-5 h-5 mr-2 text-green-500" /><span>{displayPrice}</span></div>
                                <div className="flex items-center text-gray-700 mb-4"><StarRating rating={pilot.rating} starClassName="w-6 h-6" /><span className="ml-3 text-gray-600">({pilot.reviewsCount} reviews)</span></div>
                                <div className="mb-4">
                                    <h4 className="text-sm font-semibold text-gray-500 uppercase mb-1">Specialties</h4>
                                    <div className="flex flex-wrap gap-2">{pilot.specialties.map(spec => (<span key={spec} className="bg-blue-100 text-primary text-sm font-medium px-3 py-1 rounded-full">{spec}</span>))}</div>
                                </div>
                                <button className="mt-4 bg-accent text-secondary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition duration-150 text-lg">Contact {pilot.name.split(' ')[0]}</button>
                            </div>
                        </div>

                        {/* Main Content Sections */}
                        <div className="p-8 border-t border-gray-200">
                            <section className="mb-8"><h2 className="text-2xl font-semibold text-secondary mb-3">About {pilot.name.split(' ')[0]}</h2><p className="text-gray-700 leading-relaxed whitespace-pre-line">{pilot.bio}</p></section>
                            <section className="mb-8"><h2 className="text-2xl font-semibold text-secondary mb-3 flex items-center"><SparklesIcon className="w-6 h-6 mr-2 text-primary" /> Drone Fleet & Capabilities</h2><div className="bg-gray-50 p-6 rounded-lg"><h3 className="text-xl font-semibold text-secondary mb-1">{pilot.droneInfo.model}</h3><p className="text-gray-600 mb-1"><span className="font-medium">Flight Time:</span> {pilot.droneInfo.flightTime}</p><p className="text-gray-600 mb-1"><span className="font-medium">Camera:</span> {pilot.droneInfo.camera}</p><p className="text-gray-600"><span className="font-medium">Key Features:</span> {pilot.droneInfo.features.join(', ')}</p></div></section>
                            {pilot.eventPackages.length > 0 && (<section className="mb-8"><h2 className="text-2xl font-semibold text-secondary mb-3">Service Packages</h2><div className="grid md:grid-cols-2 gap-6">{pilot.eventPackages.map((pkg, index) => (<div key={index} className="bg-blue-50 p-6 rounded-lg border border-blue-200"><h3 className="text-xl font-semibold text-primary mb-2">{pkg.name}</h3><p className="text-2xl font-bold text-secondary mb-2">${pkg.price}</p><p className="text-gray-700">{pkg.description}</p></div>))}</div></section>)}
                            <section className="mb-8"><h2 className="text-2xl font-semibold text-secondary mb-4 flex items-center"><CameraIcon className="w-6 h-6 mr-2 text-primary" /> Photo Gallery</h2><ImageGallery images={pilot.photoGallery} altTextPrefix={pilot.name} /></section>
                            <section><h2 className="text-2xl font-semibold text-secondary mb-4 flex items-center"><VideoCameraIcon className="w-6 h-6 mr-2 text-primary" /> Video Showcases</h2>{pilot.videoShowcases.length > 0 ? (<div className="grid md:grid-cols-2 gap-6">{pilot.videoShowcases.map((video, index) => (<div key={index} className="rounded-lg overflow-hidden shadow-lg"><a href={video.url} target="_blank" rel="noopener noreferrer" className="block"><img src={video.thumbnailUrl} alt={video.title} className="w-full h-48 object-cover"/><div className="p-4 bg-gray-50"><h3 className="font-semibold text-secondary hover:text-primary">{video.title}</h3><p className="text-sm text-gray-500">Click to watch</p></div></a></div>))}</div>) : (<p className="text-gray-500">No video showcases available.</p>)}</section>
                        </div>
                    </div>
                </div>
            );
        };
        
        // =================================================================
        // APP.TSX - **MODIFIED TO FETCH FROM BACKEND**
        // =================================================================
        const MOCK_PILOTS_FOR_HOMEPAGE = [{"id":"jane-doe-aerials","name":"Jane Doe Aerials","tagline":"Capturing Your Moments from a Higher Perspective","location":"San Francisco, CA","profilePictureUrl":"https://picsum.photos/seed/jane/300/300","hourlyRate":150,"eventPackages":[{"name":"Basic Wedding Package","price":800,"description":"2 hours of flight, edited photos."},{"name":"Premium Wedding Package","price":1500,"description":"4 hours of flight, edited photos & short video."}],"specialties":["Weddings","Real Estate","Events"],"bio":"With over 5 years of experience...","droneInfo":{"model":"DJI Mavic 3 Pro","flightTime":"40 minutes per battery","camera":"4/3 CMOS Hasselblad Camera, 5.1K Video","features":["Obstacle Sensing","4K Slow Motion","Hyperlapse"]},"photoGallery":["https://picsum.photos/seed/wedding1/600/400"],"videoShowcases":[],"rating":4.8,"reviewsCount":32},{"id":"john-smith-drones","name":"John Smith Drones","tagline":"Innovative Drone Solutions for Modern Needs","location":"Austin, TX","profilePictureUrl":"https://picsum.photos/seed/john/300/300","eventPackages":[{"name":"Property Survey","price":500,"description":"Detailed aerial survey with orthomosaic mapping."}],"specialties":["Construction","Agriculture","Surveying"],"bio":"John Smith Drones provides cutting-edge...","droneInfo":{"model":"DJI Matrice 300 RTK","flightTime":"55 minutes per battery","camera":"Zenmuse P1 (45MP Full-frame)","features":["RTK Positioning","Thermal Imaging Capable","IP45 Rating"]},"photoGallery":["https://picsum.photos/seed/construction1/600/400"],"videoShowcases":[],"rating":4.5,"reviewsCount":18},{"id":"cinematic-skies","name":"Cinematic Skies","tagline":"Aerial Storytelling for Film and Commercials","location":"Los Angeles, CA","profilePictureUrl":"https://picsum.photos/seed/cinematic/300/300","hourlyRate":250,"eventPackages":[{"name":"Indie Film Aerials","price":1200,"description":"Half-day shoot, raw footage delivery."}],"specialties":["Filmmaking","Commercials","Music Videos"],"bio":"We are a team of experienced aerial...","droneInfo":{"model":"Custom FPV Drones & DJI Inspire 2","flightTime":"Varies (FPV), 25 mins (Inspire 2)","camera":"GoPro Hero 12, Zenmuse X7 (Super 35mm)","features":["High-Speed FPV","Dual Operator Control (Inspire 2)","ProRes/CinemaDNG"]},"photoGallery":["https://picsum.photos/seed/filmset1/600/400"],"videoShowcases":[],"rating":4.9,"reviewsCount":45}];
        
        const HomePage = () => {
            const featuredPilots = MOCK_PILOTS_FOR_HOMEPAGE.slice(0, 3);
            return (
                <div>
                    <div className="bg-secondary text-light py-20 px-4">
                        <div className="container mx-auto text-center">
                            <h1 className="text-5xl font-bold mb-4 leading-tight">Find Your Perfect Drone Pilot</h1>
                            <p className="text-xl mb-8 text-gray-300">Connect with top-rated aerial experts for weddings, real estate, events, and more.</p>
                            <a href="#/pilots" className="bg-accent text-secondary font-bold py-3 px-8 rounded-lg text-lg hover:bg-yellow-400 transition duration-150">Browse Pilots Now</a>
                        </div>
                    </div>
                    <div className="py-16 bg-white">
                        <div className="container mx-auto px-6 text-center">
                            <h2 className="text-3xl font-bold text-secondary mb-2">How DroneConnect Works</h2>
                            <p className="text-gray-600 mb-12 max-w-2xl mx-auto">Discovering and booking skilled drone pilots is simple and straightforward.</p>
                            <div className="grid md:grid-cols-3 gap-8">
                                <div className="p-6"><div className="bg-primary text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl font-bold">1</div><h3 className="text-xl font-semibold text-secondary mb-2">Search & Discover</h3><p className="text-gray-600">Explore profiles of professional drone pilots. Filter by location, specialty, and services.</p></div>
                                <div className="p-6"><div className="bg-primary text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl font-bold">2</div><h3 className="text-xl font-semibold text-secondary mb-2">View Portfolios</h3><p className="text-gray-600">Check out stunning photo galleries, video showreels, and drone specifications for each pilot.</p></div>
                                <div className="p-6"><div className="bg-primary text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl font-bold">3</div><h3 className="text-xl font-semibold text-secondary mb-2">Connect & Book</h3><p className="text-gray-600">Directly contact pilots to discuss your project and secure their services for your event.</p></div>
                            </div>
                        </div>
                    </div>
                    <div className="py-16 bg-light">
                        <div className="container mx-auto px-6">
                            <h2 className="text-3xl font-bold text-secondary mb-12 text-center flex items-center justify-center"><SparklesIcon className="w-8 h-8 mr-3 text-accent" /> Featured Pilots</h2>
                            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">{featuredPilots.map(pilot => (<PilotCard key={pilot.id} pilot={pilot} />))}</div>
                        </div>
                    </div>
                </div>
            );
        };

        const PilotListPage = () => {
            const [allPilots, setAllPilots] = useState([]);
            const [filteredPilots, setFilteredPilots] = useState([]);
            const [searchTerm, setSearchTerm] = useState('');
            const [specialtyFilter, setSpecialtyFilter] = useState('');
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            
            const allSpecialties = Array.from(new Set(allPilots.flatMap(p => p.specialties))).sort();
            
            useEffect(() => {
                fetch('http://127.0.0.1:5000/api/pilots')
                    .then(res => {
                        if(!res.ok) throw new Error("Could not connect to the backend server.");
                        return res.json();
                    })
                    .then(data => {
                        setAllPilots(data);
                        setFilteredPilots(data);
                    })
                    .catch(error => setError(error.message))
                    .finally(() => setLoading(false));
            }, []);

            useEffect(() => {
                let pilots = allPilots;
                if (searchTerm) {
                    pilots = pilots.filter(pilot => pilot.name.toLowerCase().includes(searchTerm.toLowerCase()) || pilot.location.toLowerCase().includes(searchTerm.toLowerCase()));
                }
                if (specialtyFilter) {
                    pilots = pilots.filter(pilot => pilot.specialties.includes(specialtyFilter));
                }
                setFilteredPilots(pilots);
            }, [searchTerm, specialtyFilter, allPilots]);

            if (loading) return <div className="text-center p-10">Loading pilots...</div>;
            if (error) return <div className="text-center p-10 text-red-600">Error: {error}<p className="text-gray-600 text-sm">Please make sure the Python backend server is running.</p></div>;

            return (
                <div className="container mx-auto px-4 py-8">
                <h1 className="text-4xl font-bold text-secondary mb-4 text-center">Explore Drone Pilots</h1>
                <p className="text-lg text-gray-600 mb-8 text-center max-w-2xl mx-auto">Find the perfect drone professional for your needs. Browse through our curated list of skilled pilots, view their portfolios, and connect for your next project.</p>
                <div className="mb-8 p-6 bg-white rounded-lg shadow">
                    <div className="grid md:grid-cols-2 gap-4">
                    <div><label htmlFor="search" className="block text-sm font-medium text-gray-700 mb-1">Search Pilots</label><input type="text" id="search" placeholder="Search by name, location..." className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} /></div>
                    <div><label htmlFor="specialty" className="block text-sm font-medium text-gray-700 mb-1">Filter by Specialty</label><select id="specialty" className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary" value={specialtyFilter} onChange={(e) => setSpecialtyFilter(e.target.value)}><option value="">All Specialties</option>{allSpecialties.map(spec => (<option key={spec} value={spec}>{spec}</option>))}</select></div>
                    </div>
                </div>
                {filteredPilots.length > 0 ? (<div className="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">{filteredPilots.map(pilot => (<PilotCard key={pilot.id} pilot={pilot} />))}</div>) : (<p className="text-center text-gray-500 text-xl mt-12">No pilots found matching your criteria.</p>)}
                </div>
            );
        };
        
        const ScrollToTop = () => {
            const { pathname } = useLocation();
            useEffect(() => { window.scrollTo(0, 0); }, [pathname]);
            return null;
        };
        
        const App = () => {
            return (
                <div className="flex flex-col min-h-screen bg-light">
                    <Navbar />
                    <ScrollToTop />
                    <main className="flex-grow">
                        <Routes>
                            <Route path="/" element={<HomePage />} />
                            <Route path="/pilots" element={<PilotListPage />} />
                            <Route path="/pilots/:pilotId" element={<PilotDetailView />} />
                        </Routes>
                    </main>
                    <Footer />
                </div>
            );
        };

        // =================================================================
        // RENDER THE APPLICATION
        // =================================================================
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            <HashRouter>
                <App />
            </HashRouter>
        );

    </script>
</body>
</html>